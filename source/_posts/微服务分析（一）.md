title: 微服务分析（一）
date: 2018-01-17 13:12:37
tags: SOA

---

## 微服务架构的优势和不足

**一个应用系统里面的模块没有办法做到彻底解耦，要实现按组件单独部署是不可能的，相互之间仍有大量内部不可见的依赖导致模块间无法拆分**

#### 单体应用本身带来的问题主要有哪些

**1.系统复杂：**内部多个模块紧耦合，关联依赖复杂，牵一发而动全身
**2.运维复杂：**变更或升级的影响分析困难，任何一个小修改都可能导致单体应用整体运行出现故障
**3.无法扩展：**无法拆分部署，出现性能瓶颈后往往只能增加服务器或增加集群节点，但是DB问题难以解决

#### 正是由于这些原因需要考虑引入微服务架构（实质仍然是单个应用本身的组件化和服务化）

**一个微服务一般完成某个特定的功能，比如订单管理，客户管理。**
**每个微服务都是一个微型应用，有着自己的六边形架构，**包括商业逻辑和各种接口，有的微服务通过暴露API被别的微服务或者应用客户端所用，有的微服务通过网页UI实现
**在运行时，每个实例通常是一个云虚拟机或者Docker容器**

#### 微服务核心
##### 其一足够构成一个独立小应用（从DB到UI）
##### 其二微服务应用之间只能通过Service API进行交互
##### 其三一般运行在云虚拟机或更轻的Docker容器上

**API Gateway**
微服务架构里很重要的内容，其作用类似于传统业务内部的ESB服务总线，只是更加轻量和高性能来解决微服务的管控和治理问题

而对于**负载均衡，缓存，路由，访问控制，服务代理，监控，日志**等都属于基本的服务管控内容，也是API Gateway需要考虑的核心能力

**Scale Cube的3D模型**
描述的非常好，即通过微服务架构实施后扩展性的变化
**1.Y轴：**本质是应用的分解，即将传统的单体应用分解为多个微服务应用
**2.X轴：**水平弹性扩展能力，即通过负载均衡来实现水平弹性扩展，但DB问题无法解决
**3.Z轴：**当单个微服务应用引入DB弹性扩展能力需要解决的时候，我们引入对数据库进行拆分和DaaS

#### 简单总结微服务架构的不足
**1.CAP原则：**由于服务无状态和引入了分布式，较难解决一致性问题
**2.集成复杂：**任何彻底的分解都将带来集成的复杂度，即模块在集成时候需要外部微服务模块更多的配合
**3.部署问题：**稍大项目都涉及到上100个服务节点部署，还涉及到部署后的配置，扩展和监控问题
